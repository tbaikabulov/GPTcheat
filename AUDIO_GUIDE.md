# Руководство по работе с аудио

## Основные библиотеки

1. `sounddevice` - библиотека для работы с аудио в реальном времени
   - Позволяет записывать аудио с микрофона
   - Работает с аудио потоками
   - Поддерживает разные устройства ввода/вывода

2. `numpy` - библиотека для работы с массивами данных
   - Используется для обработки аудио данных
   - Аудио данные хранятся как массивы чисел

3. `wave` - стандартная библиотека Python для работы с WAV файлами
   - Используется для сохранения аудио в WAV формат
   - WAV - несжатый формат аудио, удобный для обработки

## Основные концепции

### 1. Аудио данные
- Аудио - это последовательность чисел (сэмплов)
- Каждый сэмпл представляет амплитуду звука в конкретный момент времени
- Частота дискретизации (sample_rate) - сколько сэмплов записывается в секунду
  - В нашем коде: 16000 Hz (16000 сэмплов в секунду)
  - Стандартные значения: 44100 Hz (CD качество), 48000 Hz (профессиональное)

### 2. Аудио буфер
```python
self.audio_buffer = []  # в AudioRecorder
```
- Буфер - это временное хранилище для аудио данных
- В нашем коде используется список для хранения сэмплов
- При записи новые сэмплы добавляются в конец буфера
- При сохранении чанка буфер очищается

### 3. Запись аудио
```python
def callback(indata, frames, time, status):
    if self.is_recording:
        self.audio_buffer.extend(indata.copy())
```
- Запись происходит через callback функцию
- `indata` - новые аудио данные от микрофона
- `frames` - количество сэмплов в текущем чанке
- Функция вызывается автоматически, когда есть новые данные

### 4. Визуализация
```python
def get_audio_level(self):
    recent_samples = self.audio_buffer[-1000:] if len(self.audio_buffer) > 1000 else self.audio_buffer
    return float(np.abs(recent_samples).mean())
```
- Уровень звука - среднее значение амплитуды
- Берем последние 1000 сэмплов для плавной визуализации
- `np.abs()` - берем модуль (отрицательные значения тоже учитываем)
- `mean()` - находим среднее значение

### 5. Сохранение в WAV
```python
audio_data = np.array(self.audio_buffer, dtype=np.float32)
audio_data = (audio_data * 32767).astype(np.int16)
```
- Конвертируем данные в правильный формат
- `float32` -> `int16` (стандартный формат для WAV)
- 32767 - максимальное значение для 16-битного аудио

## Структура проекта

1. `audio_recorder.py` - запись аудио
   - Захват аудио с микрофона
   - Сохранение в буфер
   - Конвертация в WAV

2. `wave_visualizer.py` - визуализация
   - Отрисовка волны
   - Обновление в реальном времени

3. `file_manager.py` - управление файлами
   - Создание папок для записей
   - Сохранение чанков

4. `main.py` - основной файл
   - GUI интерфейс
   - Координация работы модулей

## Что нужно знать для расширения

1. Аудио форматы
   - WAV - несжатый, хорош для обработки
   - MP3 - сжатый, меньше места
   - FLAC - сжатый без потерь

2. Параметры записи
   - sample_rate - частота дискретизации
   - channels - количество каналов (1 - моно, 2 - стерео)
   - chunk_size - размер чанка для обработки

3. Обработка аудио
   - Фильтрация шума
   - Нормализация громкости
   - Распознавание речи

## Дальнейшие шаги

1. Добавить обработку аудио
   - Фильтрация шума
   - Нормализация громкости

2. Добавить распознавание речи
   - Whisper API
   - Google Speech Recognition

3. Улучшить визуализацию
   - Спектрограмма
   - Уровень громкости
   - Частотный анализ 